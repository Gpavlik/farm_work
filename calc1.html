<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cryo s painless</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@700&family=Roboto:wght@400;500;700;900&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/modern-normalize/1.1.0/modern-normalize.css"
    integrity="sha512-Y0MM+V6ymRKN2zStTqzQ227DWhhp4Mzdo6gnlRnuaNCbc+YN/ZH0sBCLTM4M0oSy9c9VKiCvd4Jk44aCLrNS5Q=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="./css/main.css" />
  <link rel="stylesheet" href="./css/styles.css">

<!-- Google tag (gtag.js) -->

<script async src="https://www.googletagmanager.com/gtag/js?id=G-5BZZCV5DRK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());
  gtag("config", "G-5BZZCV5DRK");
</script>
<script>
  const email = localStorage.getItem("allowedEmail");
  if (email) {
    gtag("set", "user_properties", {
      user_id: email
    });
  }
</script>
<script>
  function sha256(input) {
    const encoder = new TextEncoder();
    const data = encoder.encode(input);
    return crypto.subtle.digest("SHA-256", data).then(hash => {
      return Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2, '0')).join('');
    });
  }
</script>
  <style>
    body {
      font-family: Roboto, sans-serif;
      margin: 30px;
      background-color: #f9f9f9;
    }
    label, select, input, button {
      margin: 10px 0;
      display: block;
    }
    .test-row {
      margin-bottom: 10px;
    }
    #results {
      background: #fff;
      color: #000;
      padding: 20px;
      margin-top: 20px;
      max-width: 800px;
      border: 1px solid #ccc;
      box-shadow: 0 0 4px rgba(0,0,0,0.1);
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
<header class="header">
    <div class="container header__container">
      <a class="logo" href="./index.html"><img src="./images/logo.svg" alt="logo" width="160"></a>
      <!--<ul class="nav">
        <li class="nav__referent"><a class="nav__link" href="./index.html">–ì–æ–ª–æ–≤–Ω–∞</a></li>
        <li class="nav__referent"><a class="nav__link nav__link--active" href="./portfolio.html">–ö—É—Ä—Å–∏</a></li>
        <li class="nav__referent"><a class="nav__link" href="https://pharmasco.com/contacts" target="_blank" rel="noopener noreferrer">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li>
      </ul>-->
      <ul class="contacts">
        <li class="contacts__contact">
          <a class="contacts__contact-mail " href="mailto:contact@pharmasco.com">
            <svg class="contacts__contact-icon" width="20px" height="20px">
              <use href="./images/sprite.svg#icon-envelope"></use>
            </svg>contact@pharmasco.com</a>
          </a>
        </li>
       <li class="contacts__contact">
          <a class="contacts__contact-phone " href="tel:+38 (044) 537-08-04">
            <svg class="contacts__contact-icon" width="20px" height="20px">
              <use href="./images/sprite.svg#icon-phone"></use>
            </svg>+38 (044) 537-08-04</a>
            <a class="contacts__contact-phone" style="margin-top: 8px;" href="tel:+38 (067) 500-82-74">
            <svg class="contacts__contact-icon" width="20px" height="20px">
              <use href="./images/sprite.svg#icon-phone"></use>
            </svg>+38 (067) 500-82-74</a>
        </li>
      </ul>
    </div>
    <button class="mobile-menu-btn" type="button" data-menu-button>
      <svg class="mobile-menu-icon" width="24" height="16">
        <use class="mobile-menu-burger" href="./images/sprite.svg#24-menu"></use>
        <use class="mobile-menu-close" href="./images/sprite.svg#icon-X"></use>
      </svg>
    </button>
    <div class="mobile-menu" data-menu>
      <!--<ul class="mobile-menu-nav">
        <li class="mobile-menu-nav-item">
          <a class="link " href="./index.html">–ì–æ–ª–æ–≤–Ω–∞</a>
        </li>
        <li class="mobile-menu-nav-item">
          <a class="link current" href="./portfolio.html">–ö—É—Ä—Å–∏</a>
        </li>
        <li class="mobile-menu-nav-item">
          <a class="link" href="/contact">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
        </li>
      </ul>-->
      <ul class="mobile-menu-contacts">
        <li class="contacts__contact">
          <a class="contacts__contact-phone " href="tel:+38 (044) 537-08-04">
            <svg class="contacts__contact-icon" width="20px" height="20px">
              <use href="./images/sprite.svg#icon-phone"></use>
            </svg>+38 (044) 537-08-04</a>
            <a class="contacts__contact-phone" style="margin-top: 8px;" href="tel:+38 (067) 500-82-74">
            <svg class="contacts__contact-icon" width="20px" height="20px">
              <use href="./images/sprite.svg#icon-phone"></use>
            </svg>+38 (067) 500-82-74</a>
        </li>
        <li class="mobile-menu-contacts-item">
          <a class="link" href="mailto:contact@pharmasco.com">contact@pharmasco.com</a>
        </li>
      </ul>
      <ul class="mobile-menu-socials">
        <li class="mobile-menu-socials-item">
          <a class="mobile-menu-socials-link link" href="https://www.instagram.com/pharmascocom/" target="_blank" rel="noopener noreferrer">Instagram</a>
        </li>
        <li class="mobile-menu-socials-item">
          <a class="mobile-menu-socials-link link" href="https://www.youtube.com/@Pharmasco" target="_blank" rel="noopener noreferrer">Youtube</a>
        </li>
        <li class="mobile-menu-socials-item">
          <a class="mobile-menu-socials-link link" href="https://www.facebook.com/Pharmasco/" target="_blank" rel="noopener noreferrer">Facebook</a>
        </li>
      </ul>
    </div>
  </header>
  <main>
    <section class="works" style="margin-top: 150px;">
      <div class="container">
        <h2 style="text-align: center;">üß™ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤–∏—Ç—Ä–∞—Ç —Ä–µ–∞–≥–µ–Ω—Ç—ñ–≤</h2>

        <label>–û–±–µ—Ä—ñ—Ç—å –ø—Ä–∏–ª–∞–¥:
          <select id="deviceSelect" onchange="renderTestInputs()"></select>
        </label>

        <div id="testList"></div>

        <button  class="btn" onclick="calculate()">üìä –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
        <button class="btn" onclick="copyResults()">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç –∑–≤—ñ—Ç—É</button>

        <div id="results"></div>
      </div>
    </section>
  </main>
  <footer class="footer">
    <div class="container">
      <div class="find-us">
        <div class="find">
          <a class="logo footer__logo" href="/"><img src="./images/logo.svg" alt="logo" width="160"></a>
          <ul class="contacts contacts--footer">
            <li class="contacts__contact contacts__contact--footer">
              <address class="contacts__post"><p>–£–∫—Ä–∞—ó–Ω–∞, –ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª.,</p> <p>–º. –í–∏—à–≥–æ—Ä–æ–¥,</p> <p>–≤—É–ª. –®–æ–ª—É–¥–µ–Ω–∫–∞, 15–≥</p></address>
            </li>
            <li class="contacts__contact contacts__contact--footer">
              <a class="contacts__contact-mail contacts__contact-mail--footer"
                href="mailto:contact@pharmasco.com">contact@pharmasco.com</a>
            </li>
            <li class="contacts__contact contacts__contact--footer">
              <a class="contacts__contact-phone contacts__contact-phone--footer" href="tel:+38 (044) 537-08-04">+38 (044) 537-08-04</a>
              <a class="contacts__contact-phone contacts__contact-phone--footer" href="tel:+38 (067) 500-82-74">+38 (067) 500-82-74</a>
            </li>
          </ul>
        </div>
        <div class="social social--footer">
          <h2 class="social__title">–ø—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å</h2>
          <ul class="social__list social__list--footer">
            <li class="social__item social__item--footer">
              <a class="social__link social__link--footer link" href="https://www.instagram.com/pharmascocom/" target="_blank" rel="noopener noreferrer"
                aria-label="–∏–Ω—Å—Ç–∞–≥—Ä–∞–º –∏–∫–æ–Ω–∫–∞">
                <svg class="social__icon social__icon--footer" width="20px" height="20px">
                  <use href="./images/sprite.svg#icon-instagram"></use>
                </svg></a>
            </li>
            <li class="social__item social__item--footer">
              <a class="social__link social__link--footer link" href="https://www.youtube.com/@Pharmasco" target="_blank" rel="noopener noreferrer"
                aria-label="—Ç–≤–∏—Ç—Ç–µ—Ä –∏–∫–æ–Ω–∫–∞">
                <svg class="social__icon social__icon--footer" width="20px" height="20px">
                  <use href="./images/uoytube.svg"></use>
                </svg></a>
            </li>
            <li class="social__item social__item--footer">
              <a class="social__link social__link--footer link" href="https://www.facebook.com/Pharmasco/" target="_blank" rel="noopener noreferrer"
                aria-label="—Ñ–µ–π—Å–±—É–∫ –∏–∫–æ–Ω–∫–∞">
                <svg class="social__icon social__icon--footer" width="20px" height="20px">
                  <use href="./images/sprite.svg#icon-facebook"></use>
                </svg></a> 
            </li>       
          </ul>
        </div>
        <div class="spam">
          <h2 class="spam__title" style="line-height: 2;">–¢–û–í ¬´–ù–í–ö ¬´–§–∞—Ä–º–∞—Å–∫–æ¬ª ‚Äì –ø—Ä–æ–≤—ñ–¥–Ω–∏–π –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ –∑–∞—Å–æ–±—ñ–≤ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –∑–∞–∫–ª–∞–¥—ñ–≤ –æ—Ö–æ—Ä–æ–Ω–∏ –∑–¥–æ—Ä–æ–≤‚Äô—è, –ª—ñ–∫–∞—Ä—ñ–≤ —Ç–∞ –ø–∞—Ü—ñ—î–Ω—Ç—ñ–≤.</h2>
          <!--<form class="spam__form">
            <label class="spam__label">
              <input class="spam__input" type="email" name="email" placeholder="E-mail" />
            </label>
            <button class="btn btn--spam" type="submit">–ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è<a class="spam-link link" href="" target="_blank"
                rel="noopener noreferrer" aria-label="–∏–Ω—Å—Ç–∞–≥—Ä–∞–º –∏–∫–æ–Ω–∫–∞">
                <svg class="spam__icon" width="24px" height="24px">
                  <use href="./images/sprite.svg#icon-send"></use>
                </svg></a></button>
          </form>-->
        </div>
      </div>
    </div>
        <p id="currentUser" style="font-size: smaller; color: #666; text-align: center;"></p>
  </footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
let reagentsData = {
  "devices": {
    "Biossays 240": {
      "–ì–ª—é–∫–æ–∑–∞": { "–†–µ–∞–≥–µ–Ω—Ç A": 0.3, "–†–µ–∞–≥–µ–Ω—Ç B": 0.2 },
      "–•–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω": { "–†–µ–∞–≥–µ–Ω—Ç B": 0.1, "–†–µ–∞–≥–µ–Ω—Ç C": 0.4 }
    }
  },
  "reagentsInfo": {
    "–†–µ–∞–≥–µ–Ω—Ç A": { "cost": 250, "volume": 50 },
    "–†–µ–∞–≥–µ–Ω—Ç B": { "cost": 180, "volume": 40 },
    "–†–µ–∞–≥–µ–Ω—Ç C": { "cost": 220, "volume": 60 }
  }
};

let selectedTests = {};

document.addEventListener("DOMContentLoaded", () => {
  renderDeviceList();
  renderTestInputs();
  document.title = `–ó–≤—ñ—Ç –≤—ñ–¥ ${getTodayDate()}`;
});

function getTodayDate() {
  const today = new Date();
  return today.toLocaleDateString("uk-UA", {
    year: "numeric",
    month: "long",
    day: "numeric"
  });
}

function renderDeviceList() {
  const select = document.getElementById("deviceSelect");
  select.innerHTML = "";
  for (const device in reagentsData.devices) {
    const option = document.createElement("option");
    option.value = device;
    option.textContent = device;
    select.appendChild(option);
  }
}

function renderTestInputs() {
  selectedTests = {};
  const device = document.getElementById("deviceSelect").value;
  const container = document.getElementById("testList");
  container.innerHTML = "<h3>üìã –í–≤–µ–¥—ñ—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å –Ω–∞ –¥–µ–Ω—å:</h3>";

  const tests = reagentsData.devices[device];
  for (const test in tests) {
    selectedTests[test] = 0;

    const input = document.createElement("input");
    input.type = "number";
    input.min = "0";
    input.value = "0";
    input.oninput = () => selectedTests[test] = parseInt(input.value) || 0;

    const label = document.createElement("label");
    label.textContent = `${test}: `;
    label.appendChild(input);

    const row = document.createElement("div");
    row.className = "test-row";
    row.appendChild(label);
    container.appendChild(row);
  }
}

function calculate() {
  const device = document.getElementById("deviceSelect").value;
  const tests = reagentsData.devices[device];
  const reagentsInfo = reagentsData.reagentsInfo;
  const currentDate = getTodayDate();

  const workingDays = { month: 21, quarter: 63, year: 252 };
  const usageSummary = {};
  const testSummary = {};
  let totalMonth = 0, totalQuarter = 0, totalYear = 0;

  for (const test in selectedTests) {
    const count = selectedTests[test];
    if (count <= 0) continue;

    const reagents = tests[test];
    let testCost = 0;

    for (const reagent in reagents) {
      const usage = reagents[reagent];
      const { cost, volume } = reagentsInfo[reagent];
      const pricePerMl = cost / volume;

      testCost += usage * pricePerMl;
      usageSummary[reagent] = (usageSummary[reagent] || 0) + usage * count;
    }

    testSummary[test] = { count, cost: testCost };
  }

  let html = `<h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –¥–ª—è –ø—Ä–∏–ª–∞–¥—É "${device}"</h3>`;
  html += `<p><strong>–î–∞—Ç–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É:</strong> ${currentDate}</p><ul>`;

  for (const reagent in usageSummary) {
    const usagePerDay = usageSummary[reagent];
    const { cost, volume } = reagentsInfo[reagent];
    const bottlePrice = cost;

    const bottleCounts = {
      month: Math.ceil((usagePerDay * workingDays.month) / volume),
      quarter: Math.ceil((usagePerDay * workingDays.quarter) / volume),
      year: Math.ceil((usagePerDay * workingDays.year) / volume)
    };

    const costs = {
      month: bottleCounts.month * bottlePrice,
      quarter: bottleCounts.quarter * bottlePrice,
      year: bottleCounts.year * bottlePrice
    };

    totalMonth += costs.month;
    totalQuarter += costs.quarter;
    totalYear += costs.year;

    const maxDays = Math.floor(volume / usagePerDay);

    html += `
      <li><strong>${reagent}</strong><br>
      üíß –í–∏—Ç—Ä–∞—Ç–∞ –Ω–∞ –¥–µ–Ω—å: ${usagePerDay.toFixed(2)} –º–ª<br>
      üì¶ –ü–ª—è—à–æ–∫: –º—ñ—Å—è—Ü—å ‚Äì ${bottleCounts.month}, –∫–≤–∞—Ä—Ç–∞–ª ‚Äì ${bottleCounts.quarter}, —Ä—ñ–∫ ‚Äì ${bottleCounts.year}<br>
      üíµ –í–∞—Ä—Ç—ñ—Å—Ç—å: –º—ñ—Å—è—Ü—å ‚Äì ${costs.month.toFixed(2)} –≥—Ä–Ω, –∫–≤–∞—Ä—Ç–∞–ª ‚Äì ${costs.quarter.toFixed(2)} –≥—Ä–Ω, —Ä—ñ–∫ ‚Äì ${costs.year.toFixed(2)} –≥—Ä–Ω<br>
      ‚è≥ –û–¥–∏–Ω —Ñ–ª–∞–∫–æ–Ω –≤–∏—Å—Ç–∞—á–∞—î –Ω–∞: ${maxDays} —Ä–æ–±–æ—á–∏—Ö –¥–Ω—ñ–≤</li><br>`;
  }

  html += `<h3>üí∞ –°–æ–±—ñ–≤–∞—Ä—Ç—ñ—Å—Ç—å –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å:</h3><ul>`;
  for (const test in testSummary) {
    const { count, cost } = testSummary[test];
    html += `<li>${test}: ${cost.toFixed(2)} –≥—Ä–Ω/—Ç–µ—Å—Ç √ó ${count} –Ω–∞ –¥–µ–Ω—å</li>`;
  }
  html += `</ul>`;

  html += `<h3>üìà –ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å —Ä–µ–∞–≥–µ–Ω—Ç—ñ–≤:</h3>
    <p>
      –ú—ñ—Å—è—Ü—å: <strong>${totalMonth.toFixed(2)} –≥—Ä–Ω</strong><br>
      –ö–≤–∞—Ä—Ç–∞–ª: <strong>${totalQuarter.toFixed(2)} –≥—Ä–Ω</strong><br>
      –†—ñ–∫: <strong>${totalYear.toFixed(2)} –≥—Ä–Ω</strong>
    </p>`;

  document.getElementById("results").innerHTML = html;
}

function downloadPDF() {
  calculate();

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  const content = document.getElementById("results");

  if (!content || content.innerText.trim() === "") {
    alert("‚ùó –°–ø–æ—á–∞—Ç–∫—É –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å 'üìä –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏'");
    return;
  }

  setTimeout(() => {
    doc.html(content, {
      x: 10,
      y: 10,
      width: 180,
      windowWidth: 1000,
      html2canvas: {
        scale: 1.2,
        useCORS: true,
        backgroundColor: "#ffffff"
      },
      callback: function (doc) {
        doc.save("Reagent_Cost_Report.pdf");
      }
    });
  }, 150);
}

function copyResults() {
  const results = document.getElementById("results");
  if (!results || results.innerText.trim() === "") {
    alert("–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è.");
    return;
  }

  navigator.clipboard.writeText(results.innerText)
    .then(() => alert("‚úÖ –ó–≤—ñ—Ç —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º—ñ–Ω—É"))
    .catch(() => alert("‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏"));
}
</script>

</body>
</html>
