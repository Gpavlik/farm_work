<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ—Ç—Ä–µ–±–∏ —Ä–µ–∞–≥–µ–Ω—Ç—ñ–≤</title>
  <style>
    main { font-family: sans-serif; padding: 20px; max-width: 800px; margin: auto;  margin-top: 150px;}
    .anBlock { margin-bottom: 15px; padding: 10px; border: 1px solid #ccc; border-radius: 6px; }
    label { display: block; margin-top: 8px; }
    button { margin-top: 10px; padding: 6px 12px; }
    #results { margin-top: 20px; background: #f9f9f9; padding: 15px; border-radius: 6px; }
    input{ width: 20%; padding: 5px; margin-top: 5px; border: 1px solid #ccc; border-radius: 10px; }
  </style>
   <link rel="stylesheet" href="./css/main.css" />
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body>
  <header class="header">
        <div class="container header__container">
      <h2 id="greetingMessage"></h2>
      <a class="logo" href="./index.html"><img src="./images/logo.svg" alt="logo" width="160"></a>
      <!--<ul class="nav">
        <li class="nav__referent"><a class="nav__link nav__link--active" href="./index.html">–ì–æ–ª–æ–≤–Ω–∞</a></li>
        <li class="nav__referent"><a class="nav__link" href="./portfolio.html">–ö—É—Ä—Å–∏</a></li>
        <li class="nav__referent"><a class="nav__link" href="https://pharmasco.com/contacts" target="_blank" rel="noopener noreferrer">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li>
      </ul>-->
      <ul class="contacts">
        <li class="contacts__contact">
          <a class="contacts__contact-mail " href="mailto:contact@pharmasco.com">
            <svg class="contacts__contact-icon" width="20px" height="20px">
              <use href="./images/sprite.svg#icon-envelope"></use>
            </svg>contact@pharmasco.com</a>
          </a>
        </li>
    <li class="contacts__contact">
          <a class="contacts__contact-phone " href="tel:+38 (044) 537-08-04">
            <svg class="contacts__contact-icon" width="20px" height="20px">
              <use href="./images/sprite.svg#icon-phone"></use>
            </svg>+38 (044) 537-08-04</a>
            <a class="contacts__contact-phone" style="margin-top: 8px;" href="tel:+38 (067) 500-82-74">
            <svg class="contacts__contact-icon" width="20px" height="20px">
              <use href="./images/sprite.svg#icon-phone"></use>
            </svg>+38 (067) 500-82-74</a>
        </li>
      </ul>
      
    </div>
    <button class="mobile-menu-btn" type="button" data-menu-button>
      <svg class="mobile-menu-icon" width="24" height="16">
        <use class="mobile-menu-burger" href="./images/sprite.svg#24-menu"></use>
        <use class="mobile-menu-close" href="./images/sprite.svg#icon-X"></use>
      </svg>
    </button>
    <div class="mobile-menu" data-menu>
      <ul class="mobile-menu-nav">
        <li class="mobile-menu-nav-item">
          <a class="link current" href="./index.html">–ì–æ–ª–æ–≤–Ω–∞</a>
        </li>
        <li class="mobile-menu-nav-item">
          <a class="link" href="./portfolio.html">–ö—É—Ä—Å–∏</a>
        </li>
        <li class="mobile-menu-nav-item">
          <a class="link" href="/contact">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
        </li>
      </ul>
      <ul class="mobile-menu-contacts">
        <li class="contacts__contact">
          <a class="contacts__contact-phone " href="tel:+38 (044) 537-08-04">
            <svg class="contacts__contact-icon" width="20px" height="20px">
              <use href="./images/sprite.svg#icon-phone"></use>
            </svg>+38 (044) 537-08-04</a>
            <a class="contacts__contact-phone" style="margin-top: 8px;" href="tel:+38 (067) 500-82-74">
            <svg class="contacts__contact-icon" width="20px" height="20px">
              <use href="./images/sprite.svg#icon-phone"></use>
            </svg>+38 (067) 500-82-74</a>
        </li>
        <li class="mobile-menu-contacts-item">
          <a class="link" href="mailto:contact@pharmasco.com">contact@pharmasco.com</a>
        </li>
      </ul>
      <ul class="mobile-menu-socials">
        <li class="mobile-menu-socials-item">
          <a class="mobile-menu-socials-link link" href="https://www.instagram.com/pharmascocom/" target="_blank" rel="noopener noreferrer">Instagram</a>
        </li>
        <li class="mobile-menu-socials-item">
          <a class="mobile-menu-socials-link link" href="https://www.youtube.com/@Pharmasco" target="_blank" rel="noopener noreferrer">Youtube</a>
        </li>
        <li class="mobile-menu-socials-item">
          <a class="mobile-menu-socials-link link" href="https://www.facebook.com/Pharmasco/" target="_blank" rel="noopener noreferrer">Facebook</a>
        </li>
        
      </ul>
      
    </div>
    </header>
    <main>
  <h2 style="text-align: center;">üß™ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ—Ç—Ä–µ–±–∏ —Ä–µ–∞–≥–µ–Ω—Ç—ñ–≤ —Ç–∞ —ó—Ö –≤–∞—Ä—Ç–æ—Å—Ç—ñ</h2>
<label>üí∞ –¶—ñ–Ω–∞ –ø—Ä–∏–ª–∞–¥—É (–≥—Ä–Ω):</label><br>
<input type="number" id="deviceCost"><br>

<h3 style="margin-top: 20px;">üìã –û–±–µ—Ä—ñ—Ç—å –∞–Ω–∞–ª—ñ–∑–∏:</h3>
<div id="checkboxList"></div>

<h3>üß™ –©–æ–¥–µ–Ω–Ω—ñ —Ä–µ–∞–≥–µ–Ω—Ç–∏ ‚Äî –æ–±–µ—Ä—ñ—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω—ñ:</h3>
<div id="dailyGroups"></div>
<button class="btn" onclick="toggleAllDaily(true)">‚úÖ –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –≤—Å—ñ</button>
<button class="btn" onclick="toggleAllDaily(false)">‚ùå –û—á–∏—Å—Ç–∏—Ç–∏</button>
<div id="dailyReagentSelector"></div>

<button class="btn" onclick="calculate()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
<button class="btn" onclick="copyReport()">üìã –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∑–≤—ñ—Ç</button>

<div id="results"></div>
</main>
  <footer class="footer">
    <div class="container">
      <div class="find-us">
        <div class="find">
          <a class="logo footer__logo" href="index.html"><img src="./images/logo.svg" alt="logo" width="200"></a>
          <ul class="contacts contacts--footer">
            <li class="contacts__contact contacts__contact--footer">
              <address class="contacts__post"><p>–£–∫—Ä–∞—ó–Ω–∞, –ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª.,</p> <p>–º. –í–∏—à–≥–æ—Ä–æ–¥,</p> <p>–≤—É–ª. –®–æ–ª—É–¥–µ–Ω–∫–∞, 15–≥</p></address>
            </li>
            <li class="contacts__contact contacts__contact--footer">
              <a class="contacts__contact-mail contacts__contact-mail--footer"
                href="mailto:contact@pharmasco.com">contact@pharmasco.com</a>
            </li>
            <li class="contacts__contact contacts__contact--footer">
              <a class="contacts__contact-phone contacts__contact-phone--footer" href="tel:+38 (044) 537-08-04">+38 (044) 537-08-04</a>
              <a class="contacts__contact-phone contacts__contact-phone--footer" href="tel:+38 (067) 500-82-74">+38 (067) 500-82-74</a>
            </li>
          </ul>
        </div>
        <div class="social social--footer">
          <h2 class="social__title">–ø—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å</h2>
          <ul class="social__list social__list--footer">
            <li class="social__item social__item--footer">
              <a class="social__link social__link--footer link" href="https://www.instagram.com/pharmascocom/" target="_blank" rel="noopener noreferrer"
                aria-label="–∏–Ω—Å—Ç–∞–≥—Ä–∞–º –∏–∫–æ–Ω–∫–∞">
                <svg class="social__icon social__icon--footer" width="20px" height="20px">
                  <use href="./images/sprite.svg#icon-instagram"></use>
                </svg></a>
            </li>
            <li class="social__item social__item--footer">
              <a class="social__link social__link--footer link" href="https://www.youtube.com/@Pharmasco" target="_blank" rel="noopener noreferrer"
                aria-label="—Ç–≤–∏—Ç—Ç–µ—Ä –∏–∫–æ–Ω–∫–∞">
                <svg class="social__icon social__icon--footer" width="20px" height="20px">
                  <use href="./images/uoytube.svg"></use>
                </svg></a>
            </li>
            <li class="social__item social__item--footer">
              <a class="social__link social__link--footer link" href="https://www.facebook.com/Pharmasco/" target="_blank" rel="noopener noreferrer"
                aria-label="—Ñ–µ–π—Å–±—É–∫ –∏–∫–æ–Ω–∫–∞">
                <svg class="social__icon social__icon--footer" width="20px" height="20px">
                  <use href="./images/sprite.svg#icon-facebook"></use>
                </svg></a> 
            </li>           
          </ul>
        </div>
        <div class="spam">
          <h2 class="spam__title" style="line-height: 2;">–¢–û–í ¬´–ù–í–ö ¬´–§–∞—Ä–º–∞—Å–∫–æ¬ª ‚Äì –ø—Ä–æ–≤—ñ–¥–Ω–∏–π –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ –∑–∞—Å–æ–±—ñ–≤ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –∑–∞–∫–ª–∞–¥—ñ–≤ –æ—Ö–æ—Ä–æ–Ω–∏ –∑–¥–æ—Ä–æ–≤‚Äô—è, –ª—ñ–∫–∞—Ä—ñ–≤ —Ç–∞ –ø–∞—Ü—ñ—î–Ω—Ç—ñ–≤.</h2>
          <!--<form class="spam__form">
            <label class="spam__label">
              <input class="spam__input" type="email" name="email" placeholder="E-mail" />
            </label>
            <button class="btn btn--spam" type="submit">–ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è<a class="spam-link link" href="" target="_blank"
                rel="noopener noreferrer" aria-label="–∏–Ω—Å—Ç–∞–≥—Ä–∞–º –∏–∫–æ–Ω–∫–∞">
                <svg class="spam__icon" width="24px" height="24px">
                  <use href="./images/sprite.svg#icon-send"></use>
                </svg></a></button>
          </form>-->
        </div>
      </div>
    </div>
        <p id="currentUser" style="font-size: smaller; color: #666; text-align: center;"></p>
        <button id="scrollTopBtn" title="–î–æ –≥–æ—Ä–∏">‚¨Ü</button>
  </footer>

<script>
// –†–µ–∞–≥–µ–Ω—Ç–∏ (–ø—Ä–∏–∫–ª–∞–¥ —ñ–∑ 3-—Ö, –º–æ–∂–µ—à –≤—Å—Ç–∞–≤–∏—Ç–∏ –ø–æ–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫)
const reagents = [
  { name: "–ê–õ–¢", volume: 70, price: 531, testsPerSet: 280, usagePerTest: 0.25 },
  { name: "–ê–ª—å–±—É–º—ñ–Ω", volume: 60, price: 294, testsPerSet: 200, usagePerTest: 0.3 },
  { name: "–ê–º—ñ–ª–∞–∑–∞", volume: 70, price: 4005, testsPerSet: 280, usagePerTest: 0.25 },
  { name: "–ê–°–¢", volume: 70, price: 532, testsPerSet: 280, usagePerTest: 0.25 },
  { name: "–ë—ñ–ª—ñ—Ä—É–±—ñ–Ω –∑–∞–≥–∞–ª—å–Ω–∏–π", volume: 70, price: 773, testsPerSet: 200, usagePerTest: 0.35 },
  { name: "–ë—ñ–ª—ñ—Ä—É–±—ñ–Ω –ø—Ä—è–º–∏–π", volume: 70, price: 773, testsPerSet: 200, usagePerTest: 0.35 },
  { name: "–ó–∞–≥–∞–ª—å–Ω–∏–π –±—ñ–ª–æ–∫", volume: 60, price: 270, testsPerSet: 200, usagePerTest: 0.3 },
  { name: "–ì–ì–¢", volume: 70, price: 880, testsPerSet: 280, usagePerTest: 0.25 },
  { name: "–ì–ª—é–∫–æ–∑–∞", volume: 70, price: 419, testsPerSet: 233, usagePerTest: 0.3004 },
  { name: "–ó–∞–ª—ñ–∑–æ", volume: 72, price: 2038, testsPerSet: 280, usagePerTest: 0.2571 },
  { name: "–ö–∞–ª—å—Ü—ñ–π", volume: 82, price: 523, testsPerSet: 250, usagePerTest: 0.328 },
  { name: "–ö—Ä–µ–∞—Ç–∏–Ω—ñ–Ω", volume: 80, price: 4882, testsPerSet: 267, usagePerTest: 0.2996 },
  { name: "–ö—Ä–µ–∞—Ç–∏–Ω–∫—ñ–Ω–∞–∑–∞ –∑–∞–≥–∞–ª—å–Ω–∞ (NAC)", volume: 70, price: 2670, testsPerSet: 280, usagePerTest: 0.25 },
  { name: "–ö—Ä–µ–∞—Ç–∏–Ω–∫—ñ–Ω–∞–∑–∞ —Å–µ—Ä—Ü–µ–≤–∞ —Ñ—Ä–∞–∫—Ü—ñ—è (–ú–í)", volume: 70, price: 6676, testsPerSet: 280, usagePerTest: 0.25 },
  { name: "a-HBDH", volume: 70, price: 1175, testsPerSet: 280, usagePerTest: 0.25 },
  { name: "–õ–î–ì", volume: 70, price: 1175, testsPerSet: 280, usagePerTest: 0.25 },
  { name: "–õ–∞–∫—Ç–∞—Ç", volume: 82, price: 5332, testsPerSet: 286, usagePerTest: 0.2867 },
  { name: "–°–µ—á–æ–≤–∞ –∫–∏—Å–ª–æ—Ç–∞", volume: 70, price: 839, testsPerSet: 280, usagePerTest: 0.25 },
  { name: "–°–µ—á–æ–≤–∏–Ω–∞", volume: 70, price: 668, testsPerSet: 233, usagePerTest: 0.3004 },
  { name: "–§–æ—Å—Ñ–∞—Ç–∞–∑–∞ –ª—É–∂–Ω–∞", volume: 70, price: 381, testsPerSet: 280, usagePerTest: 0.25 },
  { name: "–§–æ—Å—Ñ–æ—Ä", volume: 72, price: 824, testsPerSet: 240, usagePerTest: 0.3 },
  { name: "–•–õ–ü–í–©", volume: 80, price: 3631, testsPerSet: 250, usagePerTest: 0.32 },
  { name: "–•–õ–ü–ù–©", volume: 80, price: 4410, testsPerSet: 250, usagePerTest: 0.32 },
  { name: "–•–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω", volume: 70, price: 762, testsPerSet: 233, usagePerTest: 0.3004 },
  { name: "–¢—Ä–∏–≥–ª—ñ—Ü–µ—Ä–∏–¥–∏", volume: 70, price: 1735, testsPerSet: 233, usagePerTest: 0.3004 },
  { name: "–ê–ø–æ–ª—ñ–ø–æ–ø—Ä–æ—Ç–µ—ó–Ω –ï", volume: 80, price: 9918, testsPerSet: 250, usagePerTest: 0.32 },
  { name: "–õ—ñ–ø–æ–ø—Ä–æ—Ç–µ—ó–Ω (–∞)", volume: 70, price: 11750, testsPerSet: 200, usagePerTest: 0.35 },
  { name: "–ì–æ–º–æ—Ü–∏—Å—Ç–µ—ó–Ω", volume: 35, price: 28810, testsPerSet: 117, usagePerTest: 0.2991 },
  { name: "–ê–ø–æ–ê1", volume: 71, price: 8504, testsPerSet: 215, usagePerTest: 0.3302 },
  { name: "–ê–ø–æ –í", volume: 73, price: 10261, testsPerSet: 215, usagePerTest: 0.3395 },
  { name: "–ñ–æ–≤—á–Ω—ñ –∫–∏—Å–ª–æ—Ç–∏", volume: 80, price: 6104, testsPerSet: 222, usagePerTest: 0.3604 },
  { name: "–¢—Ä–∞–Ω—Å—Ñ–µ—Ä–∏–Ω", volume: 83, price: 14818, testsPerSet: 250, usagePerTest: 0.3327 },
  { name: "Ig –ê", volume: 73, price: 7649, testsPerSet: 240, usagePerTest: 0.3042 },
  { name: "Ig G", volume: 71, price: 7489, testsPerSet: 233, usagePerTest: 0.3047 },
  { name: "Ig –ú", volume: 73, price: 7649, testsPerSet: 240, usagePerTest: 0.3042 },
  { name: "–õ—É–∂–Ω–∞ –ø—Ä–æ–º–∏–≤–∫–∞", volume: 2000, price: 2670, testsPerSet: 11764.7059, usagePerTest: 0.1700 },
  { name: "–ö–∏—Å–ª–∞ –ø—Ä–æ–º–∏–≤–∫–∞", volume: 500, price: 4769, testsPerSet: 8333.3333, usagePerTest: 0.06 },
  { name: "–°-—Ä–µ–∞–∫—Ç–∏–≤–Ω–∏–π –±—ñ–ª–æ–∫", volume: 80, price: 18208, testsPerSet: 400, usagePerTest: 0.2 },
  { name: "–ì–ª—ñ–∫–æ–≥–µ–º–æ–≥–ª–æ–±—ñ–Ω", volume: 40, price: 26339, testsPerSet: 143, usagePerTest: 0.2797 },
  { name: "–¶–∏—Å—Ç–∞—Ç—ñ–Ω –°", volume: 36, price: 30987, testsPerSet: 144, usagePerTest: 0.25 },
  { name: "–ú–∞–≥–Ω—ñ–π", volume: 80, price: 1213, testsPerSet: 320, usagePerTest: 0.25 },
  { name: "–†–µ–≤–º–∞—Ç–æ—ó–¥–Ω–∏–π —Ñ–∞–∫—Ç–æ—Ä", volume: 80, price: 15888, testsPerSet: 340, usagePerTest: 0.2353 },
  { name: "–ê–°–û", volume: 60, price: 15469, testsPerSet: 210, usagePerTest: 0.2857 }
];

// –©–æ–¥–µ–Ω–Ω—ñ —Ä–µ–∞–≥–µ–Ω—Ç–∏ ‚Äî —Ç–µ–ø–µ—Ä –∑ —á–µ–∫–±–æ–∫—Å–∞–º–∏
const dailyReagents = [
  { name: "–ö–∞–ª—ñ–±—Ä–∞—Ç–æ—Ä–∏ –±—ñ–æ—Ö—ñ–º. —Ç–µ—Å—Ç—ñ–≤ –†—ñ–≤–µ–Ω—å 2", volume: 5, dailyUsage: 0.5, price: 3795 },
  { name: "–ö–æ–Ω—Ç—Ä–æ–ª—ñ –±—ñ–æ—Ö—ñ–º. —Ç–µ—Å—Ç—ñ–≤ –†—ñ–≤–µ–Ω—å 2/3", volume: 30, dailyUsage: 0.5, price: 12432 },
  { name: "–ö–∞–ª—ñ–±—Ä–∞—Ç–æ—Ä–∏ –ª—ñ–ø—ñ–¥—ñ–≤", volume: 3, dailyUsage: 0.5, price: 6325 },
  { name: "–ö–æ–Ω—Ç—Ä–æ–ª—ñ –ª—ñ–ø—ñ–¥—ñ–≤", volume: 6, dailyUsage: 0.5, price: 8464 },
  { name: "–ö–æ–Ω—Ç—Ä–æ–ª—ñ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏—Ö –±—ñ–ª–∫—ñ–≤", volume: 6, dailyUsage: 0.5, price: 4226 },
  { name: "–ö–æ–Ω—Ç—Ä–æ–ª—ñ –≥–ª—ñ–∫–æ–≥–µ–º–æ–≥–ª–æ–±—ñ–Ω—É", volume: 3, dailyUsage: 0.5, price: 4077 },
];

const dailyReagentsGrouped = {
  "–ë—ñ–æ—Ö—ñ–º—ñ—è": [
    { name: "–ö–∞–ª—ñ–±—Ä–∞—Ç–æ—Ä–∏ –±—ñ–æ—Ö—ñ–º. —Ç–µ—Å—Ç—ñ–≤ –†—ñ–≤–µ–Ω—å 2", volume: 5, dailyUsage: 0.5, price: 3795 },
    { name: "–ö–æ–Ω—Ç—Ä–æ–ª—ñ –±—ñ–æ—Ö—ñ–º. —Ç–µ—Å—Ç—ñ–≤ –†—ñ–≤–µ–Ω—å 2/3", volume: 30, dailyUsage: 0.5, price: 12432 },
  ],
  "–õ—ñ–ø—ñ–¥–∏": [
    { name: "–ö–∞–ª—ñ–±—Ä–∞—Ç–æ—Ä–∏ –ª—ñ–ø—ñ–¥—ñ–≤", volume: 3, dailyUsage: 0.5, price: 6325 },
    { name: "–ö–æ–Ω—Ç—Ä–æ–ª—ñ –ª—ñ–ø—ñ–¥—ñ–≤", volume: 6, dailyUsage: 0.5, price: 8464 },
  ],
  "–°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –±—ñ–ª–∫–∏": [
    { name: "–ö–æ–Ω—Ç—Ä–æ–ª—ñ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏—Ö –±—ñ–ª–∫—ñ–≤", volume: 6, dailyUsage: 0.5, price: 4226 },
    { name: "–ö–æ–Ω—Ç—Ä–æ–ª—ñ –≥–ª—ñ–∫–æ–≥–µ–º–æ–≥–ª–æ–±—ñ–Ω—É", volume: 3, dailyUsage: 0.5, price: 4077 },
  ]
};

// –í–∏–≤—ñ–¥ —á–µ–∫–±–æ–∫—Å—ñ–≤ –ø–æ –≥—Ä—É–ø–∞—Ö
const dailyGroups = document.getElementById("dailyGroups");
Object.entries(dailyReagentsGrouped).forEach(([category, reagents], groupIndex) => {
  const groupDiv = document.createElement("div");
  groupDiv.innerHTML = `<strong>${category}</strong><br>`;
  reagents.forEach((r, i) => {
    const id = `dailyCheck_${groupIndex}_${i}`;
    groupDiv.innerHTML += `<label><input type="checkbox" id="${id}"> ${r.name}</label><br>`;
    r.checkboxId = id;
  });
  dailyGroups.appendChild(groupDiv);
});

function toggleAllDaily(state) {
  Object.values(dailyReagentsGrouped).flat().forEach(r => {
    const box = document.getElementById(r.checkboxId);
    if (box) box.checked = state;
  });
};


// –î–æ–±–æ–≤–∞ –≤–∏—Ç—Ä–∞—Ç–∞ –Ω–∞ –¥–µ–Ω—å –±—É–¥–µ –¥–æ–¥–∞–≤–∞—Ç–∏—Å—è –¥–æ –≤–∏—Ç—Ä–∞—Ç —É –∑–∞–≥–∞–ª—å–Ω–æ–º—É –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ñ
const checkboxList = document.getElementById("checkboxList");
reagents.forEach((r, i) => {
  r.usagePerTest = +(r.volume / r.testsPerSet).toFixed(4);
  const block = document.createElement("div");
  block.innerHTML = `
    <label><input type="checkbox" id="check_${i}" onchange="toggleInputs(${i})"> ${r.name}</label>
    <div id="inputs_${i}" style="display:none;">
      <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∞–Ω–∞–ª—ñ–∑—ñ–≤ –Ω–∞ –¥–µ–Ω—å:</label>
      <input type="number" id="daily_${i}">
      <label>–¶—ñ–Ω–∞ –∞–Ω–∞–ª—ñ–∑—É –¥–ª—è –ø–∞—Ü—ñ—î–Ω—Ç–∞/–∫–æ–º–ø–µ–Ω—Å–∞—Ü—ñ—è –ù–¶–ó–£ (–≥—Ä–Ω):</label>
      <input type="number" id="price_${i}">
    </div>`;
  checkboxList.appendChild(block);
});

function toggleInputs(i) {
  document.getElementById(`inputs_${i}`).style.display =
    document.getElementById(`check_${i}`).checked ? "block" : "none";
}

// –í—ñ–¥–æ–±—Ä–∞–∂–∞—î —â–æ–¥–µ–Ω–Ω—ñ —Ä–µ–∞–≥–µ–Ω—Ç–∏ –≤ —Ç–∞–±–ª–∏—Ü—ñ
const dailyTableBody = document.querySelector("#dailyTable tbody");
dailyReagents.forEach(r => {
  const row = document.createElement("tr");
  row.innerHTML = `<td>${r.name}</td><td>${r.volume}</td><td>${r.dailyUsage}</td><td>${r.price}</td>`;
  dailyTableBody.appendChild(row);
});

function calculate() {
  const deviceCost = +document.getElementById("deviceCost").value;
  const workDays = { month: 21, quarter: 63, year: 252 };
  const now = new Date().toLocaleDateString('uk-UA');

  let totalDailyCost = 0;
  let totalDailyProfit = 0;
  let report = `<p><strong>üóìÔ∏è –î–∞—Ç–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É:</strong> ${now}</p>`;

  // –û—Å–Ω–æ–≤–Ω—ñ –∞–Ω–∞–ª—ñ–∑–∏
  reagents.forEach((r, i) => {
    if (!document.getElementById(`check_${i}`).checked) return;
    const count = +document.getElementById(`daily_${i}`).value;
    const patientPrice = +document.getElementById(`price_${i}`).value;

    const costPerTest = +(r.price / r.testsPerSet).toFixed(2);
    const profitPerTest = +(patientPrice - costPerTest).toFixed(2);
    const usageMl = +(r.usagePerTest * count).toFixed(4);
    const flaconsPerDay = +(usageMl / r.volume).toFixed(4);
    const costDaily = +(flaconsPerDay * r.price).toFixed(2);
    const profitDaily = +(profitPerTest * count).toFixed(2);

    totalDailyCost += costDaily;
    totalDailyProfit += profitDaily;

    report += `
      <h4>${r.name}</h4>
      <ul>
        <li>–°–æ–±—ñ–≤–∞—Ä—Ç—ñ—Å—Ç—å –∞–Ω–∞–ª—ñ–∑—É: ${costPerTest} –≥—Ä–Ω</li>
        <li>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞ –¥–µ–Ω—å: ${count}</li>
        <li>–î–æ–±–æ–≤–∞ –≤–∏—Ç—Ä–∞—Ç–∞: ${flaconsPerDay.toFixed(2)} —Ñ–ª–∞–∫–æ–Ω—ñ–≤ / ${costDaily} –≥—Ä–Ω</li>
        <li>–ß–∏—Å—Ç–∏–π –ø—Ä–∏–±—É—Ç–æ–∫: ${profitDaily} –≥—Ä–Ω</li>
      </ul>`;
  });

  // üß™ –©–æ–¥–µ–Ω–Ω—ñ —Ä–µ–∞–≥–µ–Ω—Ç–∏ ‚Äî –∞–∫—Ç–∏–≤–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏
report += `<h3>üß™ –ê–∫—Ç–∏–≤–Ω—ñ —â–æ–¥–µ–Ω–Ω—ñ —Ä–µ–∞–≥–µ–Ω—Ç–∏</h3><ul>`;
Object.values(dailyReagentsGrouped).flat().forEach(r => {
  const box = document.getElementById(r.checkboxId);
  if (!box || !box.checked) return;
  const daysPerUnit = +(r.volume / r.dailyUsage).toFixed(2);
  const bottlesPerDay = +(1 / daysPerUnit).toFixed(4);
  const costDaily = +(bottlesPerDay * r.price).toFixed(2);
  totalDailyCost += costDaily;
  report += `<li>${r.name}: ${bottlesPerDay.toFixed(2)} —Ñ–ª–∞–∫–æ–Ω—ñ–≤ / ${costDaily} –≥—Ä–Ω</li>`;
});
report += `</ul>`;

  const paybackDays = Math.ceil(deviceCost / totalDailyProfit);
  const postPayProfit = Object.entries(workDays).map(([label, days]) => {
    const sum = (totalDailyProfit * days).toFixed(2);
    return `<li>${label.charAt(0).toUpperCase() + label.slice(1)}: ${sum} –≥—Ä–Ω</li>`;
  }).join("");

  report += `<hr><h3>üìä –°—É–º–∞—Ä–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏</h3><ul>
    <li>–î–æ–±–æ–≤–∞ –≤–∏—Ç—Ä–∞—Ç–∞ —Ä–µ–∞–≥–µ–Ω—Ç—ñ–≤ + —â–æ–¥–µ–Ω–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏: ${totalDailyCost.toFixed(2)} –≥—Ä–Ω</li>
    <li>–î–æ–±–æ–≤–∏–π —á–∏—Å—Ç–∏–π –ø—Ä–∏–±—É—Ç–æ–∫: ${totalDailyProfit.toFixed(2)} –≥—Ä–Ω</li>
    <li>–û–∫—É–ø–Ω—ñ—Å—Ç—å –ø—Ä–∏–ª–∞–¥—É: ${paybackDays} —Ä–æ–±–æ—á–∏—Ö –¥–Ω—ñ–≤</li>
    <li>–ü—Ä–∏–±—É—Ç–æ–∫ –ø—ñ—Å–ª—è –æ–∫—É–ø–Ω–æ—Å—Ç—ñ:</li><ul>${postPayProfit}</ul>
  </ul>`;

  document.getElementById("results").innerHTML = report;
}

function copyReport() {
  const text = document.getElementById("results").innerText;
  navigator.clipboard.writeText(text)
    .then(() => alert("–ó–≤—ñ—Ç —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ üìã"))
    .catch(() => alert("–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ üòï"));
}
</script>
</body>

</html>